{% extends 'base.html' %}
{% block content %}
<div class="container mt-5 mb-5">
  <div class="card shadow-lg p-4">
    <h2 class="fw-bold">{{ mechanic.username }}</h2>
    {% if mechanic.mechanic_profile.shop_name %}
      <p class="text-muted">ğŸª {{ mechanic.mechanic_profile.shop_name }}</p>
    {% endif %}
    <p>ğŸ“ {{ mechanic.mechanic_profile.location }} | ğŸ“ {{ mechanic.mechanic_profile.phone }}</p>
    <p>â­ <strong>{{ avg_rating }}</strong> / 5 ({{ total_reviews }} reviews)</p>
    <hr>

    <h4>ğŸ’¬ Customer Reviews</h4>
    {% if reviews %}
      {% for r in reviews %}
      <div class="border rounded p-3 mb-3 bg-light">
        <p><strong>{{ r.customer }}</strong> â€” 
          {% for i in "12345"|make_list %}
            {% if forloop.counter <= r.rating %}â­{% else %}â˜†{% endif %}
          {% endfor %}
        </p>
        <p class="mb-2">{{ r.comment }}</p>
        <small class="text-muted">{{ r.created_at|date:"M d, Y" }}</small>
      </div>
      {% endfor %}
    {% else %}
      <div class="alert alert-info">No reviews yet for this mechanic.</div>
    {% endif %}
  </div>
</div>
{% endblock %}
